# 🏆 ランキング・達成度機能

## 📋 実装内容

### 1. ランキングシステム

**総合ポイント計算**
- **正答率スコア (40%)**: 正解した問題の割合
- **解答量スコア (35%)**: 解いた問題の総数（1000問で満点）
- **活動度スコア (25%)**: 直近30日間の活動量（300問で満点）

**特徴**
- 管理者ユーザーを除外した公平なランキング
- リアルタイムでスコア計算
- TOP 100のランキング表示
- 自分の順位とスコア詳細を確認可能

### 2. 達成度システム（冠機能）

**達成度の種類**
- 🥇 **金メダル**: 2回連続正解
- 🥈 **シルバー**: 1回正解  
- 🥉 **銅**: 未正解または不正解

**機能**
- 年度別・問題番号別の網羅表
- 達成度別の問題復習
- 進捗率の可視化
- 次の目標の提案

## 🚀 使用方法

### ランキングの確認
```
ナビゲーションバー → ランキング
```

### 達成度の確認
```
ナビゲーションバー → 達成度
```

### 達成度別に復習
```
達成度ページ → 金/銀/銅メダルボタンをクリック
```

## 📊 データベース

既存のテーブル（users, questions, user_answers）を使用。
追加のテーブルは不要で、軽量な実装。

## 🎨 UI/UX

- 既存デザインに統一されたスタイル
- レスポンシブ対応（PC・スマホ）
- アニメーション効果
- 直感的な操作性

## ⚙️ 設定

### スコア重み付けのカスタマイズ
`ranking_system.py`の`DEFAULT_WEIGHTS`を変更:

```python
DEFAULT_WEIGHTS = {
    'accuracy': 0.4,   # 正答率
    'volume': 0.35,    # 解答量
    'activity': 0.25   # 活動度
}
```

## 🔧 技術仕様

### ファイル構成
```
ranking_system.py          # ランキング計算ロジック
achievement_system.py      # 達成度管理システム
routes/ranking_routes.py   # ルーティング
templates/
  ├── ranking.html         # ランキングページ
  ├── achievement.html     # 達成度ページ
  └── achievement_review.html  # 達成度別復習ページ
```

### API エンドポイント
- `GET /ranking` - ランキングページ
- `GET /achievement` - 達成度ページ
- `GET /achievement/review/<level>` - 達成度別復習
- `GET /api/ranking/user/<user_id>` - ユーザーランキング情報
- `GET /api/achievement/coverage` - 達成度データ

## 📝 今後の拡張案

- [ ] 月間ランキング
- [ ] ジャンル別ランキング
- [ ] バッジシステム
- [ ] 学習ストリーク
- [ ] ランキング履歴

## ✅ テスト項目

- [ ] ランキング計算の正確性
- [ ] 管理者ユーザーの除外
- [ ] 達成度の正しい判定
- [ ] レスポンシブ表示
- [ ] パフォーマンス（大量データ）
