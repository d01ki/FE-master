{% extends "base.html" %}

{% block title %}管理者ダッシュボード - {{ super() }}{% endblock %}

{% block content %}
<div class="h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex flex-col">
    <div class="container mx-auto px-4 py-4 flex-1 flex flex-col">
        <!-- Header -->
        <div class="mb-4">
            <div class="bg-white/5 backdrop-blur-sm rounded-lg p-3 border border-white/10">
                <h1 class="text-xl font-bold text-white flex items-center">
                    <span
                        class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center mr-2">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z">
                            </path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                    </span>
                    管理者ダッシュボード
                </h1>
            </div>
        </div>

        <!-- システム統計 -->
        <div class="grid grid-cols-4 gap-3 mb-4">
            <!-- 問題数 -->
            <div class="bg-white/5 backdrop-blur-sm rounded-lg p-3 border border-white/10">
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-blue-600 rounded flex items-center justify-center mr-2">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                            </path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-gray-300 text-xs">問題数</p>
                        <p class="text-lg font-bold text-white">{{ stats.questions_count }}</p>
                    </div>
                </div>
            </div>

            <!-- ユーザー数 -->
            <div class="bg-white/5 backdrop-blur-sm rounded-lg p-3 border border-white/10">
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-green-600 rounded flex items-center justify-center mr-2">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z">
                            </path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-gray-300 text-xs">ユーザー数</p>
                        <p class="text-lg font-bold text-white">{{ stats.users_count }}</p>
                    </div>
                </div>
            </div>

            <!-- 総解答数 -->
            <div class="bg-white/5 backdrop-blur-sm rounded-lg p-3 border border-white/10">
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-purple-600 rounded flex items-center justify-center mr-2">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-gray-300 text-xs">総解答数</p>
                        <p class="text-lg font-bold text-white">{{ stats.answers_count }}</p>
                    </div>
                </div>
            </div>

            <!-- ジャンル数 -->
            <div class="bg-white/5 backdrop-blur-sm rounded-lg p-3 border border-white/10">
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-orange-600 rounded flex items-center justify-center mr-2">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z">
                            </path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-gray-300 text-xs">ジャンル数</p>
                        <p class="text-lg font-bold text-white">{{ stats.genres_count }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 管理機能メニュー -->
        <div class="flex-1 grid grid-cols-2 gap-4 mb-4">
            <!-- ユーザー管理 -->
            <div
                class="bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10 hover:bg-white/10 transition-all duration-200 flex flex-col">
                <div class="flex items-center justify-between mb-4">
                    <div
                        class="w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z">
                            </path>
                        </svg>
                    </div>
                    <a href="{{ url_for('admin.user_management') }}"
                        class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 font-medium">
                        管理
                    </a>
                </div>
                <div class="flex-1">
                    <h3 class="text-xl font-bold text-white mb-3">ユーザー管理</h3>
                    <p class="text-gray-300 mb-4">登録ユーザーの管理、学習進捗の確認、アカウントの有効/無効切り替えができます。</p>
                    <div class="grid grid-cols-2 gap-2 text-sm text-gray-400">
                        <div class="flex items-center">
                            <svg class="w-4 h-4 text-purple-400 mr-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            ユーザー一覧
                        </div>
                        <div class="flex items-center">
                            <svg class="w-4 h-4 text-purple-400 mr-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            学習進捗
                        </div>
                        <div class="flex items-center">
                            <svg class="w-4 h-4 text-purple-400 mr-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            データリセット
                        </div>
                        <div class="flex items-center">
                            <svg class="w-4 h-4 text-purple-400 mr-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            アカウント管理
                        </div>
                    </div>
                </div>
            </div>

            <!-- データ管理 -->
            <div
                class="bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10 hover:bg-white/10 transition-all duration-200 flex flex-col">
                <div class="flex items-center justify-between mb-4">
                    <div
                        class="w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                        </svg>
                    </div>
                    <a href="{{ url_for('upload.upload_page') }}"
                        class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 font-medium">
                        アップロード
                    </a>
                </div>
                <div class="flex-1">
                    <h3 class="text-xl font-bold text-white mb-3">データ管理</h3>
                    <p class="text-gray-300 mb-4">問題データ（JSON）と画像ファイルのアップロード、データベースの管理ができます。</p>
                    <div class="grid grid-cols-2 gap-2 text-sm text-gray-400">
                        <div class="flex items-center">
                            <svg class="w-4 h-4 text-green-400 mr-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            JSON/ZIP
                        </div>
                        <div class="flex items-center">
                            <svg class="w-4 h-4 text-green-400 mr-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            画像管理
                        </div>
                        <div class="flex items-center">
                            <svg class="w-4 h-4 text-green-400 mr-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            データベース
                        </div>
                        <div class="flex items-center">
                            <svg class="w-4 h-4 text-green-400 mr-1" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            バックアップ
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 操作リンク -->
        <div class="flex flex-wrap gap-4">
            <a href="{{ url_for('main.dashboard') }}"
                class="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg transition-all duration-200 flex items-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                ダッシュボードに戻る
            </a>

            <a href="{{ url_for('logout') }}"
                class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-all duration-200 flex items-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                    </path>
                </svg>
                ログアウト
            </a>
        </div>
    </div>
</div>
{% endblock %}